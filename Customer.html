<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Hello, world!</title>
    <!--css-->
    <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-auth.js"></script>

    <script>


    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
    apiKey: "AIzaSyDj3vYaxIua6SEBCXU3EBkd0k8gVzsf248",
    authDomain: "somesh-84c77.firebaseapp.com",
    databaseURL: "https://somesh-84c77.firebaseio.com",
    projectId: "somesh-84c77",
    storageBucket: "somesh-84c77.appspot.com",
    messagingSenderId: "783259032848",
    appId: "1:783259032848:web:e5011328194314c7429995",
    measurementId: "G-KT7XPS084Z"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    var database = firebase.database();
      var ref = database.ref('customer');
      const pref = database.ref('plans');
      var pname;
      var pprice = 0;
      ref.on("value", gotData, errData);
      function gotData(data){
        var s = data.val();
        var keys = Object.keys(data.val());

        for (var i = 0; i < keys.length; i++) {
          var k = keys[i];
          var name = s[k].name;
          var stbid = s[k].stbid;
          var mobileno= s[k].mobileno;
          var address = s[k].address;
          var status = s[k].status;

          var rowname = "ci" + i;
          var node = document.createElement("tr");
          node.id=rowname
          document.getElementById("cilist1").appendChild(node);

          var node = document.createElement("td");
          var textnode = document.createTextNode(name);
          node.appendChild(textnode);
          document.getElementById(rowname).appendChild(node);
          var node = document.createElement("td");
          var textnode = document.createTextNode(stbid);
          node.appendChild(textnode);
          document.getElementById(rowname).appendChild(node);
          var node = document.createElement("td");
          var textnode = document.createTextNode(mobileno);
          node.appendChild(textnode);
          document.getElementById(rowname).appendChild(node);
          var node = document.createElement("td");
          var textnode = document.createTextNode(address);
          node.appendChild(textnode);
          document.getElementById(rowname).appendChild(node);
          var node = document.createElement("td");
          var textnode = document.createTextNode(status);
          node.appendChild(textnode);
          document.getElementById(rowname).appendChild(node);
        }


      }
      function errData(err){
        console.log('Error!');
        console.log(err);
      }

    function ADDcustomer() {

    var data = {
      name: document.getElementById('name').value,
      stbid: document.getElementById('stbIB').value,
      mobileno: document.getElementById('mobileNO').value,
      address: document.getElementById('address').value,
      status: document.getElementById('status').value,
      balance: pprice

    }
    ref.push(data);
  }
  function MounthlyPayment() {
  pref.on("value", godsftData);
  function  godsftData(data){
    var s = data.val();
    var keys = Object.keys(data.val());
      for (var i = 0; i < keys.length; i++) {
      var k = keys[i];
      pname = s[k].pname;

      var node = document.createElement("option");
      var textnode = document.createTextNode(pname);
      node.appendChild(textnode);
      document.getElementById(display-plan).appendChild(node);
      }
      console.log(pprice);
      document.getElementById('MounthlyPayment').innerHTML = pprice;
    }
  }
</script>

    <a href="./home.html"><div class="p-3 mb-2 bg-info text-white"><h1 align="center">Joshi Cable Network</h1></div></a>
    <center>
      <a type="button" href="./Bill.html" class="btn btn-primary">Bill</a>
      <a type="button" href="./transaction.html" class="btn btn-primary">Transaction</a>
      <a type="button" href="./Plans.html" class="btn btn-primary" target="_blank">Plans</a>
    </center>
    <hr>
    <!-- Button trigger modal -->
    <center>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">+</button>
    <hr>
    <p>
    <h2>Customer list</h2>
      <table id="cilist1">
        <tr>
          <th>Name</th>
          <th>STB ID</th>
          <th>MOBILE NO</th>
          <th>ADDRESS</th>
          <th>STATUS</th>
        </tr>
        <tr id="cilist">

        </tr>
      </table>
    </p>

    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body">
            <form>
              <div class="form-row">
                  <label>Name:</label>
                  <input type="text" class="form-control"id="name" placeholder="Name"required>
              </div>
              <div><br></div>
              <div class="form-row">
                  <label>STB ID:</label>
                  <input type="text" class="form-control" id="stbIB" placeholder="STB ID" required>
              </div>
              <div><br></div>
              <div class="form-row">
                  <label>MOBILE NO:</label>
                  <input type="tel" class="form-control" id="mobileNO" placeholder="Mobile NO" maxlength="10" required>
              </div>
              <div><br></div>
              <div class="form-row">
                 <label>Status</label>
                 <select class="form-control" id="status">
                   <option value="Active">Active</option>
                   <option value="Deactive">Deactive</option>
                 </select>
               </div>
              <div><br></div>
              <div class="form-row">
                  <label>Address:</label>
                  <textarea class="form-control" id="address" rows="3"placeholder="Address" required></textarea>
              </div>
              <div><br></div>
              <hr>
              <h6>Plan list</h6>
              <div class="form-row">
                 <label>Chanal list</label>
                 <select class="form-control" id="display-plan">
                 </select>
               </div>
              <div class="form-row">
               <button text-aline="center" id="paybtn" class="btn btn-primary" onclick="MounthlyPayment()">Mounthly Payment</button>
             </div>
               <div class="form-row">
                 <h4 id="MounthlyPayment"></h4>
               </div>
              <hr>
              <button class="btn btn-primary" type="submit" onclick="ADDcustomer()">Add Customer</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>



    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <!-- Option 2: jQuery, Popper.js, and Bootstrap JS-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

  </body>
</html>
